<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<!-- SEO meta tags injected by JS below -->
<link href="https://fonts.googleapis.com/css2?family=Cabinet+Grotesk:wght@400;700;800;900&family=Instrument+Sans:wght@400;500;600&display=swap" rel="stylesheet"/>
<style>
:root{
  --bg:#050508;--surface:#0e0e14;--surface2:#16161f;--border:#1e1e2e;--border2:#2a2a40;
  --accent:#6366f1;--accent2:#a855f7;--accent3:#ec4899;--cyan:#22d3ee;
  --green:#10b981;--text:#f1f1ff;--muted:#6b7280;--muted2:#9ca3af;
}
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:'Instrument Sans',sans-serif;background:var(--bg);color:var(--text);min-height:100vh;}
.mesh{position:fixed;inset:0;z-index:0;pointer-events:none;
  background:radial-gradient(ellipse 70% 50% at 20% 10%,rgba(99,102,241,.1) 0%,transparent 60%),
             radial-gradient(ellipse 50% 40% at 80% 90%,rgba(168,85,247,.08) 0%,transparent 60%);}

/* NAV */
nav{position:sticky;top:0;z-index:100;border-bottom:1px solid var(--border);backdrop-filter:blur(24px);background:rgba(5,5,8,.88);}
.nav-inner{max-width:1100px;margin:0 auto;padding:0 24px;height:58px;display:flex;align-items:center;justify-content:space-between;}
.logo{font-family:'Cabinet Grotesk',sans-serif;font-weight:900;font-size:19px;display:flex;align-items:center;gap:8px;text-decoration:none;color:var(--text);}
.logo-icon{width:26px;height:26px;background:linear-gradient(135deg,var(--accent),var(--accent2));border-radius:7px;display:flex;align-items:center;justify-content:center;font-size:13px;}
.breadcrumb{font-size:13px;color:var(--muted);display:flex;align-items:center;gap:6px;}
.breadcrumb a{color:var(--muted2);text-decoration:none;}
.breadcrumb a:hover{color:var(--text);}
.nav-right{display:flex;align-items:center;gap:10px;}
.usage-badge{background:var(--surface2);border:1px solid var(--border2);padding:5px 14px;border-radius:20px;font-size:12px;color:var(--muted2);}
.usage-badge span{color:var(--green);font-weight:700;}
.btn-pro{background:linear-gradient(135deg,var(--accent),var(--accent2));border:none;color:#fff;padding:7px 16px;border-radius:10px;font-size:12px;font-weight:600;cursor:pointer;font-family:'Instrument Sans',sans-serif;}

/* TOOL HERO */
.tool-hero{max-width:1100px;margin:0 auto;padding:48px 24px 32px;position:relative;z-index:1;}
.tool-hero-top{display:flex;align-items:center;gap:16px;margin-bottom:16px;}
.tool-big-icon{width:60px;height:60px;border-radius:16px;display:flex;align-items:center;justify-content:center;font-size:28px;flex-shrink:0;}
.tool-cat-badge{font-size:11px;font-weight:700;padding:4px 10px;border-radius:100px;text-transform:uppercase;letter-spacing:.5px;}
.tool-hero h1{font-family:'Cabinet Grotesk',sans-serif;font-size:clamp(26px,4vw,44px);font-weight:900;letter-spacing:-1px;margin-bottom:10px;line-height:1.15;}
.tool-hero p{font-size:15px;color:var(--muted2);max-width:600px;line-height:1.7;}
.tool-meta{display:flex;align-items:center;gap:16px;margin-top:16px;flex-wrap:wrap;}
.tool-meta-item{font-size:12px;color:var(--muted);display:flex;align-items:center;gap:5px;}

/* MAIN LAYOUT */
.tool-layout{max-width:1100px;margin:0 auto;padding:0 24px 60px;display:grid;grid-template-columns:1fr 320px;gap:24px;position:relative;z-index:1;}
.tool-main{}
.tool-sidebar{}

/* INPUT CARD */
.card{background:var(--surface);border:1px solid var(--border);border-radius:18px;padding:24px;margin-bottom:20px;}
.card-title{font-family:'Cabinet Grotesk',sans-serif;font-size:13px;font-weight:700;text-transform:uppercase;letter-spacing:1px;color:var(--muted2);margin-bottom:16px;display:flex;align-items:center;gap:8px;}
.field-label{font-size:12px;font-weight:600;color:var(--muted2);margin-bottom:8px;display:block;}
.main-input{width:100%;background:var(--surface2);border:1px solid var(--border2);border-radius:12px;padding:13px 16px;color:var(--text);font-family:'Instrument Sans',sans-serif;font-size:14px;outline:none;transition:all .2s;resize:vertical;}
.main-input:focus{border-color:var(--accent);box-shadow:0 0 0 3px rgba(99,102,241,.12);}
.main-input::placeholder{color:var(--muted);}
.options-row{display:flex;gap:10px;margin-top:12px;flex-wrap:wrap;}
.lang-select,.tone-select{flex:1;min-width:130px;background:var(--surface2);border:1px solid var(--border2);border-radius:10px;padding:11px 12px;color:var(--text);font-family:'Instrument Sans',sans-serif;font-size:13px;outline:none;cursor:pointer;}
.lang-select option,.tone-select option{background:var(--surface2);}
.btn-generate{width:100%;margin-top:14px;background:linear-gradient(135deg,var(--accent) 0%,var(--accent2) 100%);border:none;color:#fff;padding:14px;border-radius:12px;font-size:15px;font-weight:600;cursor:pointer;font-family:'Instrument Sans',sans-serif;display:flex;align-items:center;justify-content:center;gap:8px;transition:all .2s;}
.btn-generate:hover{opacity:.9;transform:translateY(-1px);box-shadow:0 8px 24px rgba(99,102,241,.35);}
.btn-generate:disabled{opacity:.5;cursor:not-allowed;transform:none;}

/* SUGGESTIONS */
.suggestions{display:flex;flex-wrap:wrap;gap:6px;margin-top:10px;}
.sug-chip{background:var(--surface2);border:1px solid var(--border2);color:var(--muted2);padding:5px 12px;border-radius:20px;font-size:12px;cursor:pointer;transition:all .15s;}
.sug-chip:hover{border-color:var(--accent);color:var(--accent);}

/* LOADING */
.loading-bar{height:3px;background:var(--border);border-radius:3px;overflow:hidden;margin:16px 0;display:none;}
.loading-bar.show{display:block;}
.loading-fill{height:100%;width:0%;background:linear-gradient(90deg,var(--accent),var(--accent2),var(--cyan));border-radius:3px;transition:width .4s ease;animation:loadpulse 1.5s ease infinite;}
@keyframes loadpulse{0%{opacity:.6}50%{opacity:1}100%{opacity:.6}}
.loading-text{font-size:13px;color:var(--accent);text-align:center;padding:8px;display:none;}
.loading-text.show{display:block;}

/* RESULTS */
.results-area{display:none;}
.results-area.show{display:block;}
.result-block{background:var(--surface);border:1px solid var(--border);border-radius:14px;padding:18px;margin-bottom:14px;}
.result-block-head{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px;}
.result-block-label{font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:1px;color:var(--muted2);display:flex;align-items:center;gap:6px;}
.btn-copy{background:transparent;border:1px solid var(--border2);color:var(--muted2);padding:4px 12px;border-radius:8px;font-size:12px;cursor:pointer;transition:all .15s;font-family:'Instrument Sans',sans-serif;}
.btn-copy:hover{border-color:var(--accent);color:var(--accent);}
.btn-copy.ok{border-color:var(--green);color:var(--green);}
.result-text{font-size:13px;color:var(--muted2);line-height:1.8;white-space:pre-wrap;max-height:220px;overflow-y:auto;}
.result-text::-webkit-scrollbar{width:4px;}
.result-text::-webkit-scrollbar-track{background:var(--border);}
.result-text::-webkit-scrollbar-thumb{background:var(--accent);border-radius:4px;}
.tags-wrap{display:flex;flex-wrap:wrap;gap:7px;}
.tag-pill{background:rgba(34,211,238,.08);border:1px solid rgba(34,211,238,.18);color:#67e8f9;padding:5px 12px;border-radius:20px;font-size:12px;cursor:pointer;transition:all .15s;}
.tag-pill:hover{background:rgba(34,211,238,.15);}
.titles-list{display:flex;flex-direction:column;gap:7px;}
.title-item{background:rgba(99,102,241,.07);border:1px solid rgba(99,102,241,.18);border-radius:10px;padding:10px 14px;font-size:13px;cursor:pointer;transition:all .15s;display:flex;align-items:center;gap:10px;}
.title-item:hover{border-color:var(--accent);background:rgba(99,102,241,.14);}
.title-num{font-size:11px;font-weight:800;color:var(--accent);min-width:18px;}
.seo-score-wrap{display:flex;align-items:center;gap:14px;}
.seo-circle{width:60px;height:60px;border-radius:50%;border:3px solid var(--green);display:flex;align-items:center;justify-content:center;font-family:'Cabinet Grotesk',sans-serif;font-size:20px;font-weight:900;color:var(--green);flex-shrink:0;}
.seo-bar-bg{background:var(--border2);height:6px;border-radius:6px;overflow:hidden;margin:6px 0;}
.seo-bar-fill{height:100%;border-radius:6px;background:linear-gradient(90deg,var(--accent),var(--green));transition:width 1.2s ease;}
.seo-tip{font-size:12px;color:var(--muted2);line-height:1.6;}

/* SIDEBAR */
.sidebar-card{background:var(--surface);border:1px solid var(--border);border-radius:16px;padding:20px;margin-bottom:16px;}
.sidebar-title{font-family:'Cabinet Grotesk',sans-serif;font-size:13px;font-weight:700;text-transform:uppercase;letter-spacing:1px;color:var(--muted);margin-bottom:14px;}
.related-tool{display:flex;align-items:center;gap:10px;padding:9px 0;border-bottom:1px solid var(--border);text-decoration:none;color:var(--text);transition:all .15s;}
.related-tool:last-child{border:none;}
.related-tool:hover{color:var(--accent);}
.rt-icon{font-size:18px;width:34px;height:34px;background:var(--surface2);border-radius:9px;display:flex;align-items:center;justify-content:center;flex-shrink:0;}
.rt-name{font-size:13px;font-weight:600;}
.rt-cat{font-size:11px;color:var(--muted);margin-top:1px;}
.ad-sidebar{background:var(--surface2);border:1px dashed var(--border2);border-radius:14px;padding:16px;text-align:center;min-height:250px;display:flex;flex-direction:column;align-items:center;justify-content:center;}
.ad-label{font-size:10px;color:var(--muted);text-transform:uppercase;letter-spacing:1px;margin-bottom:8px;}

/* PRO UPGRADE */
.pro-upgrade{background:linear-gradient(135deg,rgba(99,102,241,.12),rgba(168,85,247,.08));border:1px solid rgba(99,102,241,.25);border-radius:14px;padding:18px;text-align:center;}
.pu-title{font-family:'Cabinet Grotesk',sans-serif;font-size:15px;font-weight:800;margin-bottom:6px;}
.pu-sub{font-size:12px;color:var(--muted2);margin-bottom:14px;line-height:1.6;}
.pu-btn{background:linear-gradient(135deg,var(--accent),var(--accent2));border:none;color:#fff;padding:10px 20px;border-radius:10px;font-size:13px;font-weight:600;cursor:pointer;width:100%;font-family:'Instrument Sans',sans-serif;}

/* TOAST */
.toast{position:fixed;bottom:24px;right:24px;background:var(--green);color:#fff;padding:11px 20px;border-radius:12px;font-size:13px;font-weight:600;z-index:999;transform:translateY(80px);opacity:0;transition:all .3s;}
.toast.show{transform:translateY(0);opacity:1;}

@media(max-width:768px){
  .tool-layout{grid-template-columns:1fr;}
  .tool-sidebar{display:none;}
  .tool-hero h1{font-size:26px;}
}
</style>
</head>
<body>
<div class="mesh"></div>

<nav>
  <div class="nav-inner">
    <a href="/" class="logo"><div class="logo-icon">âš¡</div> TagFlow</a>
    <div class="breadcrumb">
      <a href="/">Home</a> â€º <a href="/#tools">Tools</a> â€º <span id="breadcrumbName">Loading...</span>
    </div>
    <div class="nav-right">
      <div class="usage-badge">Free: <span id="usageLeft">5/5</span></div>
      <button class="btn-pro" onclick="window.open('https://tagflow.lemonsqueezy.com/checkout/buy/e09891a4-43d2-44c3-8b47-6afd69b6352a','_blank')">âš¡ Go Pro</button>
    </div>
  </div>
</nav>

<!-- TOOL HERO â€” filled by JS -->
<div class="tool-hero">
  <div class="tool-hero-top">
    <div class="tool-big-icon" id="heroIcon"></div>
    <span class="tool-cat-badge" id="heroCatBadge"></span>
  </div>
  <h1 id="heroTitle">Loading tool...</h1>
  <p id="heroDesc"></p>
  <div class="tool-meta">
    <span class="tool-meta-item">ğŸŒ <span id="heroLangs"></span></span>
    <span class="tool-meta-item">âš¡ Powered by Gemini AI</span>
    <span class="tool-meta-item">âœ… Free to use</span>
  </div>
</div>

<!-- AD SLOT TOP -->
<div style="max-width:1100px;margin:0 auto 16px;padding:0 24px;position:relative;z-index:1;">
  <div style="background:var(--surface);border:1px dashed var(--border);border-radius:12px;padding:12px;text-align:center;min-height:80px;display:flex;align-items:center;justify-content:center;">
    <span style="font-size:11px;color:var(--muted);text-transform:uppercase;letter-spacing:1px;">ğŸ“¢ Google AdSense â€” 728Ã—90 Banner</span>
  </div>
</div>

<div class="tool-layout">
  <!-- MAIN COLUMN -->
  <div class="tool-main">
    <!-- INPUT CARD -->
    <div class="card">
      <div class="card-title">âš¡ <span id="inputLabel">Enter your topic</span></div>

      <label class="field-label" id="inputFieldLabel">Topic / Keyword</label>
      <textarea class="main-input" id="mainInput" rows="2" placeholder="e.g. How to earn money online..." id="mainInput"></textarea>

      <!-- Dynamic extra fields injected here -->
      <div id="extraFields"></div>

      <div class="suggestions" id="suggestionsRow"></div>

      <div class="options-row">
        <select class="lang-select" id="langSelect">
          <option value="en">ğŸ‡ºğŸ‡¸ English</option>
          <option value="ur">ğŸ‡µğŸ‡° Urdu</option>
          <option value="ar">ğŸ‡¸ğŸ‡¦ Arabic</option>
          <option value="es">ğŸ‡ªğŸ‡¸ Spanish</option>
          <option value="hi">ğŸ‡®ğŸ‡³ Hindi</option>
          <option value="pt">ğŸ‡§ğŸ‡· Portuguese</option>
          <option value="fr">ğŸ‡«ğŸ‡· French</option>
          <option value="de">ğŸ‡©ğŸ‡ª German</option>
          <option value="ja">ğŸ‡¯ğŸ‡µ Japanese</option>
          <option value="ko">ğŸ‡°ğŸ‡· Korean</option>
          <option value="tr">ğŸ‡¹ğŸ‡· Turkish</option>
          <option value="id">ğŸ‡®ğŸ‡© Indonesian</option>
          <option value="both">ğŸŒ English + Urdu</option>
        </select>
        <select class="tone-select" id="toneSelect">
          <option value="professional">ğŸ’¼ Professional</option>
          <option value="casual">ğŸ˜Š Casual</option>
          <option value="funny">ğŸ˜„ Funny</option>
          <option value="persuasive">ğŸ¯ Persuasive</option>
          <option value="educational">ğŸ“š Educational</option>
        </select>
      </div>

      <div class="loading-bar" id="loadBar"><div class="loading-fill" id="loadFill"></div></div>
      <div class="loading-text" id="loadText">AI is generating your content...</div>

      <button class="btn-generate" id="genBtn" onclick="generate()">
        <span id="genBtnIcon">âš¡</span> <span id="genBtnText">Generate</span>
      </button>
    </div>

    <!-- RESULTS â€” filled by JS -->
    <div class="results-area" id="resultsArea"></div>
  </div>

  <!-- SIDEBAR -->
  <div class="tool-sidebar">
    <!-- Related Tools -->
    <div class="sidebar-card">
      <div class="sidebar-title">ğŸ”— Related Tools</div>
      <div id="relatedTools"></div>
    </div>

    <!-- Pro upgrade -->
    <div class="pro-upgrade">
      <div class="pu-title">â­ Go Pro â€” $9/mo</div>
      <div class="pu-sub">Unlimited generations, all 12 languages, ad-free experience, priority AI</div>
      <button class="pu-btn" onclick="window.open('https://tagflow.lemonsqueezy.com/checkout/buy/e09891a4-43d2-44c3-8b47-6afd69b6352a','_blank')">Upgrade Now</button>
    </div>

    <!-- AdSense sidebar -->
    <div class="ad-sidebar">
      <div class="ad-label">Advertisement</div>
      <!-- AdSense 300Ã—250 here -->
      <span style="font-size:12px;color:var(--muted)">ğŸ“¢ 300Ã—250 Ad</span>
    </div>
  </div>
</div>

<div class="toast" id="toast">âœ… Copied!</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     TOOLS DATABASE â€” Add new tools here ONLY
     Each tool needs: id, name, desc, icon, cat, langs,
     inputLabel, placeholder, suggestions, outputFields, prompt
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<script>
const GEMINI_KEY = 'AIzaSyBsu3lUu4ZIRyRF-PWH6BDwjlEkjjEKaQE';
const FREE_LIMIT = 5;

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ğŸ—‚ï¸ TOOLS DATABASE â€” JUST ADD NEW TOOLS HERE!
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const TOOLS_DB = {

  'youtube-seo': {
    name: 'YouTube SEO Generator',
    desc: 'Generate viral titles, perfect tags, full descriptions & video scripts in 12 languages. Used by 10,000+ creators.',
    icon: 'ğŸ¯', cat: 'YouTube', catColor: '#ef4444', langs: '12 Languages',
    inputLabel: 'Video Topic',
    placeholder: 'e.g. How to earn money online, ChatGPT tutorial, cooking tips...',
    suggestions: ['how to earn online','chatgpt tutorial','freelancing tips','ai tools 2025','make money online'],
    prompt: (input, lang, tone, extra) => `You are a YouTube SEO expert. Generate optimized YouTube content for: "${input}". Language: ${lang}. Tone: ${tone}.
Return ONLY valid JSON:
{"titles":["t1","t2","t3","t4","t5"],"tags":["tag1","tag2","tag3","tag4","tag5","tag6","tag7","tag8","tag9","tag10","tag11","tag12","tag13","tag14","tag15"],"description":"Full 150-word description with timestamps","hashtags":"#h1 #h2 #h3 #h4 #h5 #h6 #h7 #h8 #h9 #h10","script":"HOOK (first 30 seconds):\\n[hook]\\n\\nOUTLINE:\\n1. Intro\\n2. Main point\\n3. Tips\\n4. CTA","seo_score":85,"seo_tip":"One actionable SEO tip"}`,
    render: (data) => [
      { label:'ğŸ¯ Video Titles', type:'titles', key:'titles' },
      { label:'ğŸ·ï¸ Tags', type:'tags', key:'tags' },
      { label:'ğŸ“ Description', type:'text', key:'description' },
      { label:'#ï¸âƒ£ Hashtags', type:'text', key:'hashtags' },
      { label:'ğŸ¬ Script Hook + Outline', type:'text', key:'script' },
      { label:'ğŸ“Š SEO Score', type:'score', key:'seo_score', tip:'seo_tip' },
    ]
  },

  'fiverr-gig': {
    name: 'Fiverr Gig Writer',
    desc: 'Write SEO-optimized Fiverr gig titles, descriptions & tags that attract more buyers and rank higher.',
    icon: 'ğŸ’¼', cat: 'Freelance', catColor: '#10b981', langs: 'English + Urdu',
    inputLabel: 'Your Fiverr Service',
    placeholder: 'e.g. I will design a professional logo, WordPress website, video editing...',
    suggestions: ['logo design','wordpress website','video editing','social media management','SEO optimization'],
    prompt: (input, lang, tone) => `You are a Fiverr SEO expert. Create optimized Fiverr gig content for: "${input}". Language: ${lang}. Tone: ${tone}.
Return ONLY valid JSON:
{"gig_title":"Compelling gig title under 80 chars","gig_description":"Full gig description 300 words with benefits, process, FAQs","tags":["tag1","tag2","tag3","tag4","tag5"],"packages":{"basic":"Basic package description $15","standard":"Standard package $35","premium":"Premium package $65"},"faq":[{"q":"Question 1","a":"Answer 1"},{"q":"Question 2","a":"Answer 2"}],"seo_tip":"One tip to rank higher"}`,
    render: (data) => [
      { label:'ğŸ“Œ Gig Title', type:'text', key:'gig_title' },
      { label:'ğŸ“ Gig Description', type:'text', key:'gig_description' },
      { label:'ğŸ·ï¸ Gig Tags', type:'tags', key:'tags' },
      { label:'ğŸ“¦ Package Ideas', type:'packages', key:'packages' },
      { label:'â“ FAQ', type:'faq', key:'faq' },
    ]
  },

  'instagram-caption': {
    name: 'Instagram Caption Generator',
    desc: 'Create engaging Instagram captions with emojis, hashtags and calls to action in 12 languages.',
    icon: 'ğŸ“¸', cat: 'Social Media', catColor: '#ec4899', langs: '12 Languages',
    inputLabel: 'Post Topic or Description',
    placeholder: 'e.g. Sunset photo at beach, new product launch, motivational post...',
    suggestions: ['travel photo','motivational quote','food photo','product launch','selfie caption'],
    prompt: (input, lang, tone) => `You are a social media expert. Create Instagram captions for: "${input}". Language: ${lang}. Tone: ${tone}.
Return ONLY valid JSON:
{"caption_short":"Short punchy caption under 50 words with emojis","caption_long":"Longer engaging caption 100 words with emojis and story","hashtags":"#h1 #h2 #h3 #h4 #h5 #h6 #h7 #h8 #h9 #h10 #h11 #h12 #h13 #h14 #h15 #h16 #h17 #h18 #h19 #h20","cta":"Call to action line","bio_tip":"Quick tip to improve profile"}`,
    render: (data) => [
      { label:'âš¡ Short Caption', type:'text', key:'caption_short' },
      { label:'ğŸ“– Long Caption', type:'text', key:'caption_long' },
      { label:'#ï¸âƒ£ Hashtags (20)', type:'text', key:'hashtags' },
      { label:'ğŸ‘† Call to Action', type:'text', key:'cta' },
    ]
  },

  'cv-builder': {
    name: 'AI CV Builder',
    desc: 'Create a professional CV/resume in any language. Perfect for job applications and freelancing profiles.',
    icon: 'ğŸ“‹', cat: 'Freelance', catColor: '#10b981', langs: '12 Languages',
    inputLabel: 'Your Name & Job Target',
    placeholder: 'e.g. Ali Hassan â€” applying for Web Developer position...',
    suggestions: ['web developer','graphic designer','digital marketer','teacher','data analyst'],
    extraFields: `<label class="field-label" style="margin-top:12px;display:block;">Your Skills (comma separated)</label>
<input type="text" class="main-input" id="skillsInput" placeholder="e.g. HTML, CSS, JavaScript, Photoshop..." style="margin-bottom:0;"/>`,
    prompt: (input, lang, tone, extra) => `You are a professional CV writer. Create a CV for: "${input}". Skills: "${extra||'not specified'}". Language: ${lang}. Tone: ${tone}.
Return ONLY valid JSON:
{"professional_summary":"2-3 sentence professional summary","skills":["skill1","skill2","skill3","skill4","skill5","skill6","skill7","skill8"],"experience_template":"Work experience section template","education_template":"Education section template","achievements":["achievement1","achievement2","achievement3"],"cover_letter_opening":"First paragraph of cover letter","tips":["cv tip1","cv tip2","cv tip3"]}`,
    render: (data) => [
      { label:'ğŸ‘¤ Professional Summary', type:'text', key:'professional_summary' },
      { label:'ğŸ› ï¸ Skills', type:'tags', key:'skills' },
      { label:'ğŸ’¼ Experience Template', type:'text', key:'experience_template' },
      { label:'ğŸ“ Education Template', type:'text', key:'education_template' },
      { label:'ğŸ† Key Achievements', type:'titles', key:'achievements' },
      { label:'âœ‰ï¸ Cover Letter Opening', type:'text', key:'cover_letter_opening' },
    ]
  },

  'hashtag-generator': {
    name: 'Hashtag Generator',
    desc: 'Generate the best hashtags for Instagram, TikTok, YouTube and Twitter to maximize your reach.',
    icon: '#ï¸âƒ£', cat: 'Social Media', catColor: '#ec4899', langs: '12 Languages',
    inputLabel: 'Topic or Niche',
    placeholder: 'e.g. fitness motivation, food photography, travel vlog, coding...',
    suggestions: ['fitness','food','travel','business','motivation','technology','fashion'],
    prompt: (input, lang, tone) => `You are a social media hashtag expert. Generate hashtags for: "${input}". Language: ${lang}.
Return ONLY valid JSON:
{"instagram_tags":"#tag1 #tag2 ... 30 Instagram hashtags","tiktok_tags":"#tag1 #tag2 ... 15 TikTok hashtags","youtube_tags":"#tag1 #tag2 ... 10 YouTube hashtags","trending_tags":"#tag1 #tag2 ... 10 currently trending tags","niche_tags":"#tag1 #tag2 ... 10 niche-specific tags","tip":"Best practice tip for using hashtags"}`,
    render: (data) => [
      { label:'ğŸ“¸ Instagram (30 tags)', type:'text', key:'instagram_tags' },
      { label:'ğŸµ TikTok (15 tags)', type:'text', key:'tiktok_tags' },
      { label:'â–¶ï¸ YouTube (10 tags)', type:'text', key:'youtube_tags' },
      { label:'ğŸ”¥ Trending Now', type:'text', key:'trending_tags' },
      { label:'ğŸ¯ Niche Specific', type:'text', key:'niche_tags' },
    ]
  },

  'blog-title': {
    name: 'Blog Title Generator',
    desc: 'Generate click-worthy SEO blog titles that rank on Google and get more clicks.',
    icon: 'ğŸ“°', cat: 'SEO & Writing', catColor: '#6366f1', langs: '12 Languages',
    inputLabel: 'Blog Topic',
    placeholder: 'e.g. how to make money online, best AI tools, weight loss tips...',
    suggestions: ['make money online','ai tools','weight loss','learn programming','travel tips'],
    prompt: (input, lang, tone) => `You are an SEO blog expert. Generate blog titles for: "${input}". Language: ${lang}. Tone: ${tone}.
Return ONLY valid JSON:
{"titles":["title1","title2","title3","title4","title5","title6","title7","title8","title9","title10"],"meta_description":"155 char meta description","keywords":["kw1","kw2","kw3","kw4","kw5"],"outline":["Introduction","Section 1","Section 2","Section 3","Section 4","Conclusion"],"seo_tip":"One SEO optimization tip"}`,
    render: (data) => [
      { label:'ğŸ“° Blog Titles (10)', type:'titles', key:'titles' },
      { label:'ğŸ“‹ Meta Description', type:'text', key:'meta_description' },
      { label:'ğŸ” Keywords', type:'tags', key:'keywords' },
      { label:'ğŸ“‘ Article Outline', type:'titles', key:'outline' },
    ]
  },

  'email-writer': {
    name: 'Professional Email Writer',
    desc: 'Write professional emails for any situation â€” client outreach, follow-ups, complaints, and more.',
    icon: 'ğŸ“§', cat: 'Writing', catColor: '#6366f1', langs: 'English + Urdu',
    inputLabel: 'Email Purpose',
    placeholder: 'e.g. Follow up with client about project, ask for salary raise, complaint about service...',
    suggestions: ['follow up client','job application','project proposal','request meeting','thank you email'],
    prompt: (input, lang, tone) => `You are a professional email writer. Write an email for: "${input}". Language: ${lang}. Tone: ${tone}.
Return ONLY valid JSON:
{"subject":"Email subject line","email_formal":"Formal version of the email","email_friendly":"Friendly version of the email","subject_alternatives":["alt subject 1","alt subject 2","alt subject 3"],"tips":["email tip 1","email tip 2"]}`,
    render: (data) => [
      { label:'ğŸ“Œ Subject Line', type:'text', key:'subject' },
      { label:'ğŸ’¼ Formal Version', type:'text', key:'email_formal' },
      { label:'ğŸ˜Š Friendly Version', type:'text', key:'email_friendly' },
      { label:'ğŸ“ Subject Alternatives', type:'titles', key:'subject_alternatives' },
    ]
  },

  'video-ideas': {
    name: 'Video Idea Generator',
    desc: 'Get 20 viral video ideas for your YouTube channel niche. Never run out of content again.',
    icon: 'ğŸ’¡', cat: 'YouTube', catColor: '#ef4444', langs: '12 Languages',
    inputLabel: 'Your Channel Niche',
    placeholder: 'e.g. tech tutorials, cooking, fitness, online earning, AI tools...',
    suggestions: ['tech reviews','cooking','fitness','personal finance','ai tools','travel vlog'],
    prompt: (input, lang, tone) => `You are a YouTube content strategist. Generate video ideas for a "${input}" channel. Language: ${lang}.
Return ONLY valid JSON:
{"viral_ideas":["idea1","idea2","idea3","idea4","idea5"],"educational_ideas":["idea1","idea2","idea3","idea4","idea5"],"trending_ideas":["idea1","idea2","idea3","idea4","idea5"],"series_idea":"A 5-part series concept","shorts_ideas":["short1","short2","short3","short4","short5"],"best_posting_times":"Best days and times to post"}`,
    render: (data) => [
      { label:'ğŸ”¥ Viral Ideas', type:'titles', key:'viral_ideas' },
      { label:'ğŸ“š Educational Ideas', type:'titles', key:'educational_ideas' },
      { label:'ğŸ“ˆ Trending Ideas', type:'titles', key:'trending_ideas' },
      { label:'ğŸ“º Series Idea', type:'text', key:'series_idea' },
      { label:'ğŸ“± Shorts Ideas', type:'titles', key:'shorts_ideas' },
    ]
  },

};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// RELATED TOOLS MAP
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const RELATED = {
  'youtube-seo':    ['video-ideas','youtube-seo','hashtag-generator','blog-title'],
  'fiverr-gig':     ['cv-builder','email-writer','blog-title'],
  'instagram-caption': ['hashtag-generator','blog-title','email-writer'],
  'cv-builder':     ['fiverr-gig','email-writer'],
  'hashtag-generator': ['instagram-caption','youtube-seo','video-ideas'],
  'blog-title':     ['email-writer','hashtag-generator','youtube-seo'],
  'email-writer':   ['cv-builder','fiverr-gig','blog-title'],
  'video-ideas':    ['youtube-seo','hashtag-generator'],
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// AUTO INIT â€” reads URL to know which tool to show
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const pathParts = window.location.pathname.split('/').filter(Boolean);
const toolId = pathParts[pathParts.length - 1] || 'youtube-seo';
const TOOL = TOOLS_DB[toolId] || TOOLS_DB['youtube-seo'];

// Inject SEO meta
document.title = `${TOOL.name} â€” Free AI Tool | TagFlow`;
document.head.insertAdjacentHTML('beforeend',
  `<meta name="description" content="${TOOL.desc}"/>
   <link rel="canonical" href="https://tagflow-vert.vercel.app/tools/${toolId}"/>`);

// Fill hero
document.getElementById('heroTitle').textContent = TOOL.name;
document.getElementById('heroDesc').textContent = TOOL.desc;
document.getElementById('heroLangs').textContent = TOOL.langs;
document.getElementById('breadcrumbName').textContent = TOOL.name;
document.getElementById('inputLabel').textContent = TOOL.inputLabel;
document.getElementById('mainInput').placeholder = TOOL.placeholder;
const heroIcon = document.getElementById('heroIcon');
heroIcon.textContent = TOOL.icon;
heroIcon.style.background = `${TOOL.catColor}20`;
const badge = document.getElementById('heroCatBadge');
badge.textContent = TOOL.cat;
badge.style.background = `${TOOL.catColor}18`;
badge.style.color = TOOL.catColor;
badge.style.border = `1px solid ${TOOL.catColor}35`;

// Fill suggestions
if(TOOL.suggestions){
  document.getElementById('suggestionsRow').innerHTML =
    TOOL.suggestions.map(s=>`<div class="sug-chip" onclick="document.getElementById('mainInput').value='${s}'">${s}</div>`).join('');
}

// Fill extra fields
if(TOOL.extraFields){
  document.getElementById('extraFields').innerHTML = TOOL.extraFields;
}

// Fill related tools
const relIds = (RELATED[toolId]||[]).filter(id=>id!==toolId).slice(0,4);
document.getElementById('relatedTools').innerHTML = relIds.map(id=>{
  const t = TOOLS_DB[id];
  if(!t) return '';
  return `<a href="/tools/${id}" class="related-tool">
    <div class="rt-icon">${t.icon}</div>
    <div><div class="rt-name">${t.name}</div><div class="rt-cat">${t.cat}</div></div>
  </a>`;
}).join('');

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// USAGE TRACKING
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function getUsage(){
  const today = new Date().toDateString();
  const s = JSON.parse(localStorage.getItem('tf_usage')||'{}');
  return s.date===today ? s.count||0 : 0;
}
function incUsage(){
  const today=new Date().toDateString(), count=getUsage()+1;
  localStorage.setItem('tf_usage', JSON.stringify({date:today,count}));
  updateBadge();
}
function updateBadge(){
  const left = Math.max(0, FREE_LIMIT-getUsage());
  document.getElementById('usageLeft').textContent = `${left}/${FREE_LIMIT}`;
}
updateBadge();

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// LOCATION DETECT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let userCountry='';
fetch('https://ipapi.co/json/').then(r=>r.json()).then(d=>{userCountry=d.country_name||'';}).catch(()=>{});

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// GENERATE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
async function generate(){
  const input = document.getElementById('mainInput').value.trim();
  if(!input){ alert('Please enter a topic!'); return; }
  if(getUsage()>=FREE_LIMIT){
    alert('Daily free limit reached! Upgrade to Pro for unlimited use.');
    window.open('https://tagflow.lemonsqueezy.com/checkout/buy/e09891a4-43d2-44c3-8b47-6afd69b6352a','_blank');
    return;
  }
  const lang = document.getElementById('langSelect').value;
  const tone = document.getElementById('toneSelect').value;
  const extra = document.getElementById('skillsInput')?.value||'';
  const langLabel = document.getElementById('langSelect').selectedOptions[0].text;
  const loc = userCountry ? ` User is from ${userCountry} â€” include 1-2 location-specific tags.` : '';

  setLoading(true);
  try{
    const promptText = TOOL.prompt(input, langLabel, tone, extra) + loc;
    const res = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${GEMINI_KEY}`,{
      method:'POST',headers:{'Content-Type':'application/json'},
      body:JSON.stringify({contents:[{parts:[{text:promptText}]}],generationConfig:{temperature:0.75,maxOutputTokens:2500}})
    });
    if(!res.ok) throw new Error('API error');
    const d = await res.json();
    const raw = d.candidates[0].content.parts[0].text.trim();
    const data = JSON.parse(raw.replace(/```json|```/g,'').trim());
    renderResults(data);
    incUsage();
  }catch(e){
    console.error(e);
    alert('Generation failed. Please check your internet and try again.');
  }
  setLoading(false);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// RENDER RESULTS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderResults(data){
  const fields = TOOL.render(data);
  const area = document.getElementById('resultsArea');
  area.innerHTML = fields.map(f=>{
    const val = data[f.key];
    if(!val) return '';
    let content='';
    if(f.type==='titles'||f.type==='outline'){
      const arr = Array.isArray(val)?val:[val];
      content=`<div class="titles-list">${arr.map((t,i)=>`<div class="title-item" onclick="copyText('${String(t).replace(/'/g,"&#39;")}')"><span class="title-num">${String(i+1).padStart(2,'0')}</span><span>${t}</span></div>`).join('')}</div>`;
    } else if(f.type==='tags'){
      const arr = Array.isArray(val)?val:[val];
      content=`<div class="tags-wrap">${arr.map(t=>`<div class="tag-pill" onclick="copyText('${String(t).replace(/'/g,"&#39;")}')">${t}</div>`).join('')}</div>`;
    } else if(f.type==='score'){
      const score=parseInt(val)||80;
      const col=score>=80?'var(--green)':score>=60?'#eab308':'#ef4444';
      content=`<div class="seo-score-wrap"><div class="seo-circle" style="border-color:${col};color:${col}">${score}</div><div style="flex:1"><div style="font-size:12px;color:var(--muted2);margin-bottom:4px">Optimization Score</div><div class="seo-bar-bg"><div class="seo-bar-fill" id="seoBar" style="width:0%;background:linear-gradient(90deg,${col},var(--cyan))"></div></div><div class="seo-tip" style="margin-top:6px">${data[f.tip]||''}</div></div></div>`;
      setTimeout(()=>{const b=document.getElementById('seoBar');if(b)b.style.width=score+'%';},100);
    } else if(f.type==='packages'){
      content=`<div class="titles-list">${Object.entries(val).map(([k,v])=>`<div class="title-item"><span class="title-num">${k}</span><span>${v}</span></div>`).join('')}</div>`;
    } else if(f.type==='faq'){
      const arr=Array.isArray(val)?val:[val];
      content=`<div class="titles-list">${arr.map(item=>`<div class="title-item" style="flex-direction:column;align-items:flex-start;gap:4px"><span style="color:var(--accent);font-weight:700;font-size:12px">Q: ${item.q||''}</span><span style="color:var(--muted2);font-size:12px">A: ${item.a||''}</span></div>`).join('')}</div>`;
    } else {
      content=`<div class="result-text">${String(val)}</div>`;
    }
    return `<div class="result-block">
      <div class="result-block-head">
        <span class="result-block-label">${f.label}</span>
        <button class="btn-copy" onclick="copyBlock(this,'${f.key}')">Copy</button>
      </div>
      ${content}
    </div>`;
  }).join('');
  area.classList.add('show');
  area.scrollIntoView({behavior:'smooth',block:'start'});
  window._lastData = data;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// UI HELPERS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function setLoading(on){
  document.getElementById('genBtn').disabled=on;
  document.getElementById('genBtnText').textContent=on?'Generating...':'Generate';
  document.getElementById('genBtnIcon').textContent=on?'â³':'âš¡';
  document.getElementById('loadBar').classList.toggle('show',on);
  document.getElementById('loadText').classList.toggle('show',on);
  if(on){ let w=0; const iv=setInterval(()=>{ w=Math.min(w+8,90); document.getElementById('loadFill').style.width=w+'%'; if(!on)clearInterval(iv); },300); }
  else { document.getElementById('loadFill').style.width='100%'; setTimeout(()=>{ document.getElementById('loadFill').style.width='0%'; },400); }
}
function copyText(t){
  navigator.clipboard.writeText(t).then(showToast);
}
function copyBlock(btn,key){
  const val = window._lastData?.[key];
  if(!val) return;
  const text = Array.isArray(val)?val.join('\n'):typeof val==='object'?JSON.stringify(val,null,2):String(val);
  navigator.clipboard.writeText(text).then(()=>{
    btn.textContent='âœ“ Copied!'; btn.classList.add('ok');
    setTimeout(()=>{btn.textContent='Copy';btn.classList.remove('ok');},2000);
    showToast();
  });
}
function showToast(){
  const t=document.getElementById('toast');
  t.classList.add('show');
  setTimeout(()=>t.classList.remove('show'),2200);
}

// Enter key to generate
document.getElementById('mainInput').addEventListener('keydown',e=>{ if(e.key==='Enter'&&!e.shiftKey){e.preventDefault();generate();} });
</script>
</body>
</html>
